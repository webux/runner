/*
* uxRunner v.0.1.0
* (c) 2013, WebUX
* License: MIT.
*/
!function(a){function b(a,b,c){function d(a,b){var c,d;d=h[a],d&&(b?(c=d.indexOf(b),-1!==c&&d.splice(c,1)):d.length=0)}function e(a,b){return h[a]=h[a]||[],h[a].push(b),function(){d(a,b)}}function f(b,c){return b&&b.apply(a,c)}function g(a){if(h[a])for(var b=0,c=h[a],d=c.length;d>b;)f(c[b],arguments),b+=1}var h={};b&&c?(a.on=b[c.on]&&b[c.on].bind(b),a.off=b[c.off]&&b[c.off].bind(b),a.dispatch=b[c.dispatch].bind(b)):(a.on=e,a.off=d,a.dispatch=g)}function c(a){for(var b=[],c=0,d=a.length;d>c;)b.push(a[c]),c+=1;return b}function d(){V.debug&&console.log.apply(console,arguments)}function e(){V.dispatcher?V.dispatcher.dispatch.apply(V.dispatcher,arguments):V.dispatch.apply(V,arguments)}function f(){bb.window=bb.window||window,bb.rootElement=bb.rootElement||$(bb.window.document),W=V.getInjector&&V.getInjector()||{invoke:B},V.locals.injector=W}function g(){f(),V.walking=!1,V.exit=!1,h()}function h(){V.inPageMethods.length&&(k(V.inPageMethods,function(a){a.apply(V.options.window,[])}),V.inPageMethods.length=0)}function i(){var a={name:"all",type:db.ROOT,label:"E2E Tests",parent:{type:db.ROOT,depth:0,next:function(){d("All Complete"),e(ab.DONE)}}};X=l(a),a.depth=0,Y=X}function j(a,b){for(var c="";c.length<b;)c+=a;return c}function k(a,b,c){var d,e,f=0;if(a.length)for(d=a.length;d>f;){if(e=b(a[f],f,a,c),void 0!==e)return e;f+=1}else for(f in a)if(a.hasOwnProperty(f)&&(e=b(a[f],f,a,c),void 0!==e))return e;return a}function l(a){function b(a){q.push(a)}function c(){return a.state=cb.RUNNING,Y=a,a.startTime=Date.now(),a.parent&&(a.exit=s=a.parent.exit,u="(EXIT: exit inherited.)"),a.parent&&a.parent.element&&(a.element=a.parent.element),e(ab.STEP_START,a),d("%sRUN:%s: %s",j("	",a.depth),a.type,a.label),k(),a}function f(){return V.walking&&e(ab.STEP_UPDATE,a),(p=q[r])?(r+=1,p.run(),void 0):(g(),void 0)}function g(){a.state!==cb.COMPLETE&&(a.state=cb.COMPLETE,d("%sCOMPLETE:%s: %s",j("	",a.depth),a.type,a.label),e(ab.STEP_END,a)),a.onComplete&&a.onComplete(),a.parent.next()}function h(b){return W.invoke(b,a,_)}function i(a){return a?!!h(a):!0}function k(){if(s?(a.label+="(EXIT: "+u+")",a.pass=!1,a.repeat=0):(h(a.method),a.pass=i(a.validate)),a.count+=1,a.timedOut=!t(a),a.repeat>a.count&&!a.pass&&!a.timedOut)d("%s%s: checking %s",j("	",a.depth),a.type,a.label),clearTimeout(Z),e(ab.STEP_UPDATE,a),Z=bb.async?setTimeout(k,bb.interval):k();else{if(d('%s%s: %s, value:"%s" (%s)',j("	",a.depth),a.type,a.label,a.value,a.pass?"pass":"fail"),fb=a,V.pauseOnFail&&!a.pass&&(O(),e(ab.STEP_UPDATE,a)),V.walking)return e(ab.STEP_PAUSE,a),void 0;clearTimeout(Z),e(ab.STEP_UPDATE,a),Z=bb.async?setTimeout(f,bb.interval):f()}}function l(b,c,d,e){c=c||function(){};var f={type:db.STEP,parentType:db.STEP,repeat:1,label:b||"CUSTOM",value:void 0,method:function(){return f.element=a.element,f.value=f.exec(c),f},validate:function(){return"boolean"==typeof d?d:d?f.exec(d):!0},timeout:e||bb.interval};return n(f,f.parent),f}function m(b,c,d){var e={type:db.STEP,parentType:db.STEP,repeat:1,label:b||"UNTIL",value:void 0,method:function(){return e.element=a.element,e},validate:function(){var a=c?e.exec(c):!0;return t(e)&&!a&&(e.repeat+=1),a},timeout:d||bb.interval};return n(e,e.parent),e}function o(){a.isDone=!0,a.repeat=0}var p,q=[],r=0,s=!1,u="",v=[db.SCENARIO,db.ROOT];for(a.type===db.ROOT?v=[db.ROOT]:a.type===db.STEP&&(v=[db.SCENE,db.STEP]);a.parent&&-1===v.indexOf(a.parent.type);)a.parent=a.parent.parent;return a.parent||a.type===db.ROOT||(V.exit=a.exit=s=!0,u="Unable find step parent. Most likely caused by improper organization. Such as adding a find inside a scenario instead of inside a step."),a.id=Math.uuid(),a.state=cb.DORMANT,a.type=a.type||db.STEP,a.label=a.label||"no label",a.timeout=a.timeout||bb.defaultTimeout,a.method=a.method||function(){},a.validate=a.validate||function(){return!0},a.repeat=a.repeat||1,a.count=0,a.add=b,a.run=c,a.next=f,a.custom=l,a.until=m,a.done=o,a.exec=h,a.steps=q,a.depth=a.parent?a.parent.depth+1:0,a}function m(a){return a.type=a.type||db.STEP,a.parent=a.parent||Y,Y.add(l(a)),a}function n(a,b){return a.type=db.STEP,a.parent=b||Y,m(a),w(a),a}function o(a,b){m({type:db.SCENARIO,parentType:db.SCENARIO,label:a,method:b})}function p(a,b,c,d){m({type:db.SCENE,parentType:db.SCENARIO,label:a,method:b,validate:c,timeout:d})}function q(a){a=a||bb.interval,m({type:db.STEP,parentType:db.SCENE,label:"wait "+a+"ms",method:null,repeat:1e4,validate:function(){return!t(this,!0)},timeout:a})}function r(a,b,c){m({type:db.STEP,parentType:db.SCENE,label:"wait for "+a,method:null,repeat:1e4,validate:b,timeout:c})}function s(a,b){var c={type:db.STEP,parentType:db.SCENE,label:'wait for "'+a+'" event.',repeat:1e4,scope:null,method:function(){c.scope||(c.element=c.parent.element||bb.rootElement,c.scope=c.element.scope(),c.scope.$on(a,function(){c.ngEvent=!0}))},validate:function(){return!!c.ngEvent},timeout:b||bb.timeouts.short};m(c)}function t(a,b){return a.timeout+a.startTime-(b?bb.interval:0)>Date.now()}function u(a,b,c,d){"trigger"===c&&(a.label='trigger "'+d[0].toUpperCase()+'"')}function v(a,b,c){return function(){var d=arguments,e={label:b.toUpperCase(),value:void 0,timeout:bb.interval,method:function(){var a=e.element;if(a){if(!a[b])throw new Error('Method "'+b+'" is not supported yet.');u(e,a,b,d),a[b].apply(a,d),c&&(e.value=a[b].apply(a,[]))}return e},validate:function(){return e.element&&e.element.length?c&&d.length?e.value===d[0]:!0:!1}};return n(e,a),e}}function w(a){x(a),y(a),k(V.elementMethods,z,a)}function x(a){for(var b=0,c=V.jqMethods.length;c>b;)a[V.jqMethods[b]]=v(a,V.jqMethods[b]),b+=1}function y(a){for(var b=0,c=V.jqAccessors.length;c>b;)a[V.jqAccessors[b]]=v(a,V.jqAccessors[b],!0),b+=1}function z(a,b,c,d){"function"==typeof a?a(d):d[a.name]=a.method(d)}function A(a,b,c){var d="function"==typeof a?"(custom method)":a,e={type:db.STEP,parentType:db.SCENE,repeat:1e4,label:c||'find: "'+d+'"',value:void 0,method:function(){return e.value=e.element=bb.rootElement.find("function"==typeof a?e.exec(a):a),e},validate:function(){var a=!!e.value.length;return e.label=a?e.label:'could not find "'+d+'"',a},timeout:b};return n(e),e}function B(a,b,c){var d=C(a,c);return a.apply(b,d.args)}function C(a,b){var c=a.toString(),d={map:{},args:[],locals:b},e=c.match(/\(.*\)/)[0].match(/([\$\w])+/gm);return e&&e.length&&k(e,D,d),d}function D(a,b,c,d){d.map[a]=d.locals[a]||window[a],d.args.push(d.map[a])}function E(a,b){return eb.push({name:a,scenario:b}),b}function F(){eb.length=0,V.scenarios={}}function G(a){V.options=$.extend(bb,a)}function H(){var a=[];return k(eb,function(b){a.push(b.name)}),a}function I(a){return a=a.toLowerCase(),k(eb,function(b){return b.name.toLowerCase()===a?b:void 0})}function J(a){a="string"!=typeof a?a:I(a),m({type:db.SCENARIO,parentType:db.ROOT,label:"SCENARIO: "+a.name,method:a.scenario})}function K(){for(var a=0,b=eb.length;b>a;)J(eb[a]),a+=1}function L(a){V.stop&&V.stop(),g(),V.onStart&&V.onStart(),e(ab.START),d("run"),i(),a?k(arguments,J):K(),Y.run()}function M(){L.apply(V,arguments),O()}function N(){fb.next()}function O(){V.walking=!0}function P(){V.walking=!1,N()}function Q(b,c){var d=0,e=a.util.array.toArray(arguments);for(e.shift(),e.shift();c>d;)b.apply({},[d].concat(e)),d+=1}function R(b,c,d,e){c=c||0,d=d||Y;var f=!1,g=function(){f=!0},h={type:db.SCENE,parentType:db.SCENARIO,label:"repeatUntil",parent:d,method:function(){},validate:function(){return W.invoke(b,a,$.extend({count:c,done:g},_)),f&&(h.label="repeatUntil - END"),!0},onComplete:function(){f||R(b,c+1,d,h)},timeout:bb.interval};h.type=h.type||db.STEP,h.parent=h.parent||Y,e?d.steps.splice(d.steps.indexOf(e)+1,0,l(h)):d.add(l(h)),h.done=g}function S(){function a(a){a.preventDefault(),a.stopImmediatePropagation()}function b(){$(".runner-overlay").length&&p(),A=0,B=0,w=$('<div class="runner-overlay"><div class="runner-highlight-container"></div><div class="runner-title">RUNNER ( <a href="javascript:void(0)" class="runner-close">X</a> <a href="javascript:void(0)" class="runner-pause">||</a> <a href="javascript:void(0)" class="runner-next">&#x25B6;|</a> <a href="javascript:void(0)" class="runner-resume">&#x25B6;</a> <a href="javascript:void(0)" class="runner-details" title="Click to show or hide details.">?</a> ) <a href="javascript:void(0)" class="runner-complete"></a> </div><div class="runner-clear"></div><div class="runner-scroller"><div class="runner-content'+(V.compact?" compact":"")+'">'+'<div class="runner-content-title-spacer"></div>'+"</div>"+"</div>"+"</div>"),x=w.find(".runner-content"),w.click(a),w.mousedown(function(){D=!0}),w.mouseup(function(){D=!1}),$(document).blur(function(b){D&&a(b)}),y=$('<div class="runner-highlighter"></div>'),$("body").append(w),$(".runner-highlight-container").append(y),d(),u()}function c(){ux.runner.walking?$(".runner-resume").removeClass("unpaused").addClass("paused"):$(".runner-resume").removeClass("paused").addClass("unpaused")}function d(){var a,b=$(".runner-highlight-container"),c=$("#targetFrame");c.length?(V.options.frame&&c.css(V.options.frame),a=c.offset(),a.position="absolute",a.width=c.width(),a.height=c.height(),b.css(a)):b.css({position:"absolute",top:0,left:0,width:"100%",height:"100%"})}function e(a){if(c(),d(),a&&a.length){var b=a.offset();y.removeClass("runner-highlighter-empty"),y.css({top:b.top,left:b.left,width:a.width(),height:a.height()})}else y.addClass("runner-highlighter-empty")}function f(a){return a.type===ux.runner.types.STEP}function g(a,b){var c=f(a.parent)&&f(a),d=$("#"+a.id);d.html((c&&" - "||"")+'<span class="runner-step-label">'+a.label+"</span>"+(a.count>1?' <span class="runner-step-count" title="repeat count">'+a.count+"</span>":"")+(a.timedOut?' <span class="runner-timed-out" title="timeout">timeout</span>':"")+(b?' <span class="runner-step-paused" title="paused">paused'+(V.pauseOnFail?" on fail":"")+"</span>":""))}function h(a,b){if(e(b.element),!$("#"+b.id).length){var c=f(b.parent),d=c?4:20*b.depth,h=f(b);h&&z&&z.depth>=b.depth&&b!==b.parent.steps[0]&&x.append('<div class="runner-break"></div>'),x.append('<div id="'+b.id+'" class="runner-pending runner-'+b.type+(h?"-chain":"")+'" style="margin-left: '+d+'px;margin-right: 0px;"></div>'),g(b)}}function i(a,b){r(),g(b,!0),e(b.element)}function j(a,b){b.count>1&&g(b),e(b.element),m()}function k(a,b){var c=$("#"+b.id);c.addClass("runner-"+(b.pass?"pass":"fail")),c.attr("title",b.label),g(b),e(b.element),n(),z=b,l(b)}function l(a){a.pass?A+=1:B+=1,m()}function m(a){var b=$(".runner-complete");b.removeClass("paused"),b.removeClass("passed"),b.removeClass("failed"),V.walking?b.addClass("paused"):B?b.addClass("failed"):b.addClass("passed"),b.html(A+" steps passed, "+B+" failed."+(a?" complete":V.walking?" paused":" running"))}function n(){w.find(".runner-scroller").scrollTop(x.height())}function o(){n(),m(!0)}function p(){w&&($(".runner-overlay").remove(),x=null,w=null,y=null,z=null,v())}function q(){w&&(p(),ux.runner.pause())}function r(){x.removeClass("compact")}function s(){x.addClass("compact")}function t(){return x.hasClass("compact")?r():s()}function u(){V.on(V.events.START,b),V.on(V.events.STEP_START,h),V.on(V.events.STEP_UPDATE,j),V.on(V.events.STEP_END,k),V.on(V.events.STEP_PAUSE,i),V.on(V.events.DONE,o),$(".runner-close").click(V.stop),$(".runner-pause").click(V.pause),$(".runner-next").click(V.next),$(".runner-resume").click(V.resume),$(".runner-details").click(t)}function v(){V.off(V.events.START,b),V.off(V.events.STEP_START,h),V.off(V.events.STEP_UPDATE,j),V.off(V.events.STEP_END,k),V.off(V.events.STEP_PAUSE,i),V.off(V.events.DONE,o),$(".runner-close").unbind("click",V.stop),$(".runner-pause").unbind("click",V.pause),$(".runner-next").unbind("click",V.next),$(".runner-resume").unbind("click",V.resume),$(".runner-details").unbind("click",t)}var w,x,y,z,A,B,C={},D=!1;return C.start=b,C.stepStart=h,C.stepEnd=k,C.done=o,V.stop=q,V.onStart=b,C}function T(a,b){this.el=a,a.scope&&(this.scope=a.scope());var c="text password number email url search tel";this.isEditable=/textarea|select/i.test(a[0].nodeName)||a[0].type&&c.indexOf(a[0].type.toLowerCase())>-1,this.isEditable&&(this.selStart=a.getSelectionStart()||0,this.selEnd=a.getSelectionEnd()||a.val().length,a.setSelection(this.selStart,this.selEnd),this.cursorPosition=this.selEnd),this.capsLocked=!1,b&&this.lock()}function U(a,b){var c={label:"sendKeys "+a,method:function(){c.element.length&&T.exec(c.element,a)},validate:function(){if(!c.element.length)return c.label="sendKeys failed because there is no element selected.",!1;if(b){var a="ng-model",d=c.element.attr(a)||c.element.attr("data-"+a);return c.value=d?c.element.scope().$eval(d):c.element.val(),c.value+""==b+""}return!0}};return c}a.util=a.util||{},a.util.array=a.util.array||{},a.util.array.toArray=c;var V,W,X,Y,Z,_={},ab={START:"runner:start",STEP_START:"runner:stepStart",STEP_UPDATE:"runner:stepUpdate",STEP_END:"runner:stepEnd",STEP_PAUSE:"runner:stepPause",DONE:"runner:done"},bb={async:!0,interval:100,defaultTimeout:1e3,frame:{top:0,left:0,width:"100%",height:"100%"},timeouts:{mini:100,"short":1e3,medium:1e4,"long":3e4,forever:6e4}},cb={DORMANT:"dormant",RUNNING:"running",COMPLETE:"complete"},db={ROOT:"root",SCENARIO:"scenario",SCENE:"scene",STEP:"step"},eb=[],fb=null;if(!Math.uuid){var gb=0;Math.uuid=function(){gb+=1;for(var a=gb.toString(36).toUpperCase();a.length<6;)a="0"+a;return a}}l.DORMANT=0,l.RUNNING=1,l.COMPLETE=2,V={getInjector:null,compact:!0,debug:!1,config:G,exit:!1,run:L,walk:M,walking:!1,pauseOnFail:!0,next:N,pause:O,resume:P,addScenario:E,clearScenarios:F,getScenarioNames:H,types:db,events:ab,states:cb,createStep:m,createElementStep:n,elementMethods:[],scenarios:{},locals:_,dispatcher:null,each:k,repeat:Q,inPageMethods:[],jqMethods:["focus","blur","click","mousedown","mouseover","mouseup","select","touchstart","touchend","trigger"],jqAccessors:["val","text","html","scrollTop"]},_.scenario=o,_.repeatUntil=R,_.scene=p,_.find=A,_.options=bb,_.wait=q,_.waitFor=r,_.waitForNgEvent=s,b(V),a.runner=V,$("body").ready(function(){V.options&&V.options.autoStart&&("function"==typeof V.options.autoStart?(f(),V.options.autoStart.apply(V,[])):setTimeout(V.run,1e3))}),S(),V.elementMethods.push(function(a){a.scrollUp=function(b){return a.custom("scrollUp",function(){return a.element.scrollTop(a.element.scrollTop()-b)})},a.scrollDown=function(b){return a.custom("scrollDown",function(){return a.element.scrollTop(a.element.scrollTop()+b)})}}),T.exec=function(a,b){var c,d,e=new T(a),f=b.match(/"[^"]+"|\w+/gim),g=0,h=f.length;for(e.lock();h>g;)d=f[g],c=d.match(/[^"]+/gim)[0],"delete"===c&&(c="del"),"function"==typeof e[c]?e[c]():e.type(c),e.release(),g+=1};var hb=T.prototype;hb.checkShiftKey=function(a){var b=a.toUpperCase();return b===a?!0:!1},hb.key={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capslock:20,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,numpad0:96,numpad1:97,numpad2:98,numpad3:99,numpad4:100,numpad5:101,numpad6:102,numpad7:103,numpad8:104,numpad9:105,"*":106,"+":107,"-":109,".":110,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,"=":187,",":188,"/":191,"\\":220},hb.type=function(a,b){var c,d,e;for(this.selStart!==this.selEnd&&(c=this.el.val(),c=c.substr(0,this.selStart)+c.substr(this.selEnd),this.el.val(c),this.selStart=this.selEnd=null),a=a||"",d=0,e=a.length;e>d;)this.punch(a.charAt(d),b),d+=1;return this},hb.punch=function(a,b){var c,d,e,f,g,h,i=this.el,j=this.scope,k=a.toLowerCase(),l=this.attr("ng-model");return b=b||{},"disabled"!==this.attr("disabled")&&(d=this.key[k],e=this.checkShiftKey(a),c=this.createEvent("keydown",{shiftKey:e,keyCode:d}),this.dispatchEvent(i[0],"keydown",c),this.isEditable&&1===a.length&&(f=this.cursorPosition,g=i.val(),g=g.substr(0,f)+a+g.substr(f),l&&j&&j.$eval(l+' = "'+g+'"'),i.val(g),this.cursorPosition+=1),c=this.createEvent("keyup",{shiftKey:e,keyCode:d}),this.dispatchEvent(i[0],"keyup",c),j&&((h=i.data("$ngModelController"))&&h.$setViewValue(i.val()),j.$$phase||j.$apply())),this},hb.attr=function(a){return this.el.attr(a)||this.el.attr("data-"+a)},hb.enter=function(a){return this.punch("enter",a),this},hb.left=function(a){return this.el,this.isEditable?this.cursorPosition-=1:this.punch("left",a),this},hb.up=function(a){return this.punch("up",a),this},hb.right=function(a){return this.el,this.isEditable?this.cursorPosition+=1:this.punch("right",a),this},hb.down=function(a){return this.punch("down",a),this},hb.home=function(a){return this.el,this.isEditable?this.cursorPosition=0:this.punch("home",a),this},hb.end=function(a){var b=this.el;return this.isEditable?this.cursorPosition=b.val().length:this.punch("home",a),this},hb.pageUp=function(a){return this.punch("pageup",a),this},hb.pageDown=function(a){return this.punch("pagedown",a),this},hb.del=function(a){if(this.isEditable){var b=this.el.val(),c=this.cursorPosition;this.el.val(b.substr(0,c)+b.substr(c+1))}else this.punch("delete",a);return this},hb.tab=function(a){return this.punch("tab",a),this},hb.backspace=function(a){if(this.isEditable){var b=this.el.val(),c=this.cursorPosition;this.el.val(b.substr(0,c-1)+b.substr(c)),this.cursorPosition=c-1}else this.punch("backspace",a);return this},hb.capsLock=function(){this.capsLocked=!this.capsLocked},hb.lock=function(){var a=$(document);return a.bind("mousedown",this.killEvent),a.bind("keydown",this.killEvent),a.bind("focus",this.killEvent),a.bind("blur",this.killEvent),this},hb.release=function(){var a=$(document);return a.unbind("mousedown",this.killEvent),a.unbind("keydown",this.killEvent),a.unbind("focus",this.killEvent),a.unbind("blur",this.killEvent),this},hb.killEvent=function(a){a.preventDefault(),a.stopImmediatePropagation()},hb.dispatchEvent=function(a,b,c){return a.dispatchEvent?a.dispatchEvent(c):a.fireEvent&&a.fireEvent("on"+b,c),c},hb.createEvent=function(a,b){var c,d;if(d=$.extend({bubbles:!0,cancelable:!0,view:window,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:0,charCode:0},b),$.isFunction(document.createEvent))try{c=document.createEvent("KeyEvents"),c.initKeyEvent(a,d.bubbles,d.cancelable,d.view,d.ctrlKey,d.altKey,d.shiftKey,d.metaKey,d.keyCode,d.charCode)}catch(e){c=document.createEvent("Events"),c.initEvent(a,d.bubbles,d.cancelable),$.extend(c,{view:d.view,ctrlKey:d.ctrlKey,altKey:d.altKey,shiftKey:d.shiftKey,metaKey:d.metaKey,keyCode:d.keyCode,charCode:d.charCode})}else document.createEventObject&&(c=document.createEventObject(),$.extend(c,d));return void 0!==$.browser&&($.browser.msie||$.browser.opera)&&(c.keyCode=d.charCode>0?d.charCode:d.keyCode,c.charCode=void 0),c},V.elementMethods.push({name:"sendKeys",method:function(a){return function(){var b=U.apply(null,arguments);return V.createElementStep(b,a),b}}}),V.inPageMethods.push(function(){"use strict";var a,b=this.jQuery.fn;b.getCursorPosition=function(){return 0===this.length?-1:$(this).getSelectionStart()},b.setCursorPosition=function(a){return 0===this.length?this:$(this).setSelection(a,a)},b.getSelection=function(){if(0===this.length)return-1;var a=$(this).getSelectionStart(),b=$(this).getSelectionEnd();return this[0].value.substring(a,b)},b.getSelectionStart=function(){if(0===this.length)return-1;a=this[0];var b,c=a.value.length;return a.createTextRange?(b=document.selection.createRange().duplicate(),b.moveEnd("character",a.value.length),""===b.text&&(c=a.value.length),c=a.value.lastIndexOf(b.text)):void 0!==a.selectionStart&&(c=a.selectionStart),c},b.getSelectionEnd=function(){if(0===this.length)return-1;a=this[0];var b,c=a.value.length;return a.createTextRange?(b=document.selection.createRange().duplicate(),b.moveStart("character",-a.value.length),""===b.text&&(c=a.value.length),c=a.value.lastIndexOf(b.text)):void 0!==a.selectionEnd&&(c=a.selectionEnd),c},b.setSelection=function(b,c){if(0===this.length)return this;if(a=this[0],a.createTextRange){var d=a.createTextRange();d.collapse(!0),d.moveEnd("character",c),d.moveStart("character",b),d.select()}else a.setSelectionRange&&(a.focus(),a.setSelectionRange(b,c));return this}}),V.elementMethods.push(function(a){a.sendMouse=function(b,c){c=c?"."+c:"";var d=a.trigger("mousedown"+c);return b&&d.focus(),d.trigger("mouseup"+c).trigger("click"+c)}}),V.elementMethods.push(function(a){a.sendTap=function(b,c){c=c?"."+c:"";var d=a.trigger("touchstart"+c);return b&&d.focus(),d.trigger("touchend"+c).trigger("click"+c)}}),V.elementMethods.push(function(a){a.toBe=function(b){var c={label:"toBe "+b,value:void 0,timeout:V.locals.options.interval,method:function(){},validate:function(){var d=a.value===b;return c.label=d?"toBe "+b:"expected "+a.value+" to be "+b,d}};return V.createElementStep(c,a)}})}(this.ux=this.ux||{},function(){return this}());